<h1>Codeial <%= title %></h1>

<!-- Posts need to render on home page so will make a form which user will share or post-->
<section id = "feed-posts">
<h4>Posts</h4>
<!-- if user is not signedIn then don't show the post form or signed In user can see the post form-->
<% if(locals.user) { %>
<form action="/posts/create" id = "new-post-form" method="POST">
    <textarea name="content" cols="30" rows="5" placeholder="Type here..."></textarea>
    <input type="submit" value ="Post">
</form>
<% } %>


<div id = "posts-list-container">
 <ul>
    <% for(post of posts) { %> 
        <li>
            <p>
                <!-- deleting post in UI url-->
                <!-- locals.user is signedIn user & id of user who currently signedIn == id of user who made a post-->
                <% if(locals.user && locals.user.id == post.user.id) { %>
                    <small>
                       <a href="/posts/destroy/<%= post.id %>">Delete Post(X)</a>
                       <!--Add a data attribute for post ID and prevent default click behavior
                          <a href="#" data-post-id="<%= post.id %>" class="delete-post-link">Delete Post(X)</a>--> 

                    </small>
                 <% } %>   

                <%= post.content %>
                <br>
                <small>
                    <%= post.user.name %>
                </small>
            </p>
            <!-- showing commment form-->
            <div class="post-comments">
                <% if(locals.user){%> 
                    <form action="/comments/create" method="POST">
                        <input type="text" name="content" placeholder="type here to add comment...">
                        <input type="hidden" name="post"  value="<%= post._id %>" >
                        <input type="submit" value="Add Comment">
                    </form>
                    <%} %>
            </div>
            <!-- dsiplaying comments and author of comments-->
            <!-- for viewing the comments signedIn not required-->
            <div id = "post-comments-list">
                <ul id="post-comments-<%= post._id%>">
                    <% for(comment of post.comments) {%>
                        <p>
                            <%= comment.content %>
                            <br>
                            <small>
                                <%= comment.user.name %>
                            </small>
                        </p>
                    <% } %>    
                </ul>
            </div>

        </li>
    <% } %>       
 </ul>

</div>
</section>
     